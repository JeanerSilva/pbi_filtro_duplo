var filtroConjugado123456;(()=>{"use strict";var t={111:(t,e,i)=>{i.r(e)},473:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VisualSettings=void 0;var i=function(){function t(){this.behavior_selectionMode=!0,this.behavior_forceSelection=!0,this.formatting_fontSize=12,this.formatting_itemPadding=4}return t.parse=function(e){var i=e&&e.metadata&&(e.metadata.objects||{}),s=new t;return s.behavior_selectionMode=o(i,"behavior","selectionMode",!0),s.behavior_forceSelection=o(i,"behavior","forceSelection",!0),s.formatting_fontSize=r(i,"formatting","fontSize",12),s.formatting_itemPadding=r(i,"formatting","itemPadding",4),s},t}();function s(t,e){return t&&t[e]||{}}function r(t,e,i,r){var o=s(t,e)[i];return"number"!=typeof o||isNaN(o)?r:o}function o(t,e,i,r){var o=s(t,e)[i];return"boolean"==typeof o?o:r}e.VisualSettings=i},848:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Visual=void 0,i(111);var s=i(473),r="general",o="filter",n=function(){function t(t){this.settings=new s.VisualSettings,this.items=[],this.currentTarget=null,this.lastCategoryQueryName=null,this.lastItemCount=0,this.root=document.createElement("div"),this.root.className="filtro-conjugado",this.listContainer=document.createElement("div"),this.listContainer.className="list-container",this.list=document.createElement("ul"),this.list.className="list",this.listContainer.appendChild(this.list),this.root.appendChild(this.listContainer),this.host={applyJsonFilter:function(){}},t&&(this.host=t.host,t.element.appendChild(this.root))}return t.prototype.update=function(t){var e=t.dataViews&&t.dataViews[0];e&&(this.settings=s.VisualSettings.parse(e));var i=null==e?void 0:e.categorical,r=(null==i?void 0:i.categories)&&i.categories[0]||null;if(!r)return this.items=[],this.currentTarget=null,this.lastCategoryQueryName=null,this.lastItemCount=0,void this.render();var o=r.source&&r.source.queryName||null;if(this.lastCategoryQueryName&&o&&o!==this.lastCategoryQueryName&&(this.items=[],this.lastItemCount=0),this.lastCategoryQueryName=o,this.currentTarget=this.extractTargetFromMetadata(r),this.rebuildItems(r),this.settings.behavior_selectionMode&&this.settings.behavior_forceSelection&&this.items.length>0){for(var n=!1,a=0;a<this.items.length;a++)if(this.items[a].selected){n=!0;break}var l=0===this.lastItemCount||this.items.length<=this.lastItemCount;if(!n&&l){for(a=0;a<this.items.length;a++)this.items[a].selected=!1;this.items[0].selected=!0,this.applyBasicFilter()}}this.lastItemCount=this.items.length,this.render()},t.prototype.rebuildItems=function(t){for(var e=t.values||[],i=new Array(e.length),s=new Set,r=0;r<this.items.length;r++)this.items[r].selected&&s.add(this.items[r].label);for(r=0;r<e.length;r++){var o=e[r],n=null==o?"":String(o);i[r]={label:n,selected:s.has(n)}}this.items=i},t.prototype.extractTargetFromMetadata=function(t){var e,i,s,r,o=null===(e=t.source)||void 0===e?void 0:e.expr;try{var n=o&&(o.ref||o.level||o.source&&o.source.ref)||(null===(i=t.source)||void 0===i?void 0:i.groupName),a=o&&o.source&&o.source.entity||o&&o.arg&&o.arg.source&&o.arg.source.entity||o&&o.arg&&o.arg.arg&&o.arg.arg.entity;if(a&&n)return{table:String(a),column:String(n)}}catch(t){}var l=null===(s=t.source)||void 0===s?void 0:s.queryName;if(l&&"string"==typeof l){var c=l.lastIndexOf(".");if(c>0&&c<l.length-1)return{table:l.substring(0,c),column:l.substring(c+1)}}return(null===(r=t.source)||void 0===r?void 0:r.displayName)?{table:"",column:t.source.displayName}:null},t.prototype.applyBasicFilter=function(){if(this.currentTarget){for(var t=[],e=0;e<this.items.length;e++)this.items[e].selected&&t.push(this.items[e].label);if(0!==t.length){var i={$schema:"http://powerbi.com/product/schema#basic",filterType:1,target:{table:this.currentTarget.table,column:this.currentTarget.column},operator:"In",values:t};this.host.applyJsonFilter(i,r,o,0)}else this.host.applyJsonFilter(null,r,o,2)}},t.prototype.render=function(){for(var t=this;this.list.firstChild;)this.list.removeChild(this.list.firstChild);if(0===this.items.length){var e=document.createElement("div");return e.className="empty",e.textContent="Sem itens",void this.list.appendChild(e)}for(var i=this.settings.behavior_selectionMode,s=function(e){var s=r.items[e],o=document.createElement("li");o.className="item"+(s.selected?" selected":""),o.style.fontSize="".concat(r.settings.formatting_fontSize,"px"),o.style.paddingTop="".concat(r.settings.formatting_itemPadding,"px"),o.style.paddingBottom="".concat(r.settings.formatting_itemPadding,"px");var n=document.createElement("input");n.type=i?"radio":"checkbox",i&&(n.name="visual-selection-group"),n.checked=s.selected,n.addEventListener("click",function(e){e.stopPropagation(),t.onItemClick(s)});var a=document.createElement("span");a.textContent=s.label,a.style.marginLeft="4px",a.style.wordBreak="break-word",o.appendChild(n),o.appendChild(a),o.addEventListener("mousedown",function(t){0===t.button&&t.preventDefault()}),o.addEventListener("click",function(e){0===e.button&&t.onItemClick(s)}),r.list.appendChild(o)},r=this,o=0;o<this.items.length;o++)s(o)},t.prototype.onItemClick=function(t){var e=this.settings.behavior_selectionMode,i=!e;if(!(e&&this.settings.behavior_forceSelection&&t.selected)){if(i)t.selected=!t.selected;else{for(var s=0;s<this.items.length;s++)this.items[s].selected=!1;t.selected=!0}this.updateListSelectionClasses(),this.applyBasicFilter()}},t.prototype.updateListSelectionClasses=function(){for(var t=Array.prototype.slice.call(this.list.children),e=0;e<t.length;e++){var i=t[e];if(i.classList.contains("item")){var s=this.items[e];if(s){i.classList.toggle("selected",!!s.selected);var r=i.querySelector("input");r&&(r.checked=!!s.selected)}}}},t.prototype.enumerateObjectInstances=function(t){var e=[];return"behavior"===t.objectName&&e.push({objectName:"behavior",properties:{selectionMode:this.settings.behavior_selectionMode,forceSelection:this.settings.behavior_forceSelection},selector:{}}),"formatting"===t.objectName&&e.push({objectName:"formatting",properties:{fontSize:this.settings.formatting_fontSize,itemPadding:this.settings.formatting_itemPadding},selector:{}}),e},t}();e.Visual=n}},e={};function i(s){var r=e[s];if(void 0!==r)return r.exports;var o=e[s]={exports:{}};return t[s](o,o.exports,i),o.exports}i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var s={};(()=>{var t=s;Object.defineProperty(t,"__esModule",{value:!0});var e=i(848),r=window.powerbi,o={name:"filtroConjugado123456",displayName:"Filtro Conjugado",class:"Visual",apiVersion:"5.11.0",create:function(t){if(e.Visual)return new e.Visual(t);throw"Visual instance not found"},createModalDialog:function(t,e,i){var s=globalThis.dialogRegistry;t in s&&new s[t](e,i)},custom:!0};void 0!==r&&(r.visuals=r.visuals||{},r.visuals.plugins=r.visuals.plugins||{},r.visuals.plugins.filtroConjugado123456=o),t.default=o})(),filtroConjugado123456=s})();