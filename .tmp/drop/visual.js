var filtroConjugado123456;(()=>{"use strict";var e={111:(e,t,i)=>{i.r(t)},473:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VisualSettings=void 0;var i=function(){function e(){this.behavior_selectionMode=!0,this.behavior_forceSelection=!0,this.formatting_fontSize=12,this.formatting_itemPadding=4,this.search_enabled=!0,this.search_placeholder="Pesquisar...",this.search_fontSize=12}return e.parse=function(t){var i=new e,n=t&&t.metadata&&(t.metadata.objects||{});return i.behavior_selectionMode=r(n,"behavior","selectionMode",i.behavior_selectionMode),i.behavior_forceSelection=r(n,"behavior","forceSelection",i.behavior_forceSelection),i.formatting_fontSize=a(n,"formatting","fontSize",i.formatting_fontSize),i.formatting_itemPadding=a(n,"formatting","itemPadding",i.formatting_itemPadding),i.search_enabled=r(n,"search","enabled",i.search_enabled),i.search_placeholder=function(e,t,i,r){var a=s(e,"search");return"string"==typeof a[i]?a[i]:r}(n,0,"placeholder",i.search_placeholder),i.search_fontSize=a(n,"search","fontSize",i.search_fontSize),i},e}();function s(e,t){return e&&e[t]?e[t]:{}}function r(e,t,i,r){var a=s(e,t);return"boolean"==typeof a[i]?a[i]:r}function a(e,t,i,r){var a=s(e,t);return"number"==typeof a[i]?a[i]:r}t.VisualSettings=i},848:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Visual=void 0,i(111);var s=i(473),r="general",a="filter",n=function(){function e(e){var t=this;this.settings=new s.VisualSettings,this.items=[],this.searchQuery="",this.currentTarget=null,this.lastCategoryQueryName=null,this.lastItemCount=0,this.root=document.createElement("div"),this.root.className="filtro-conjugado",this.searchBar=document.createElement("div"),this.searchBar.className="search-bar",this.searchInputWrap=document.createElement("div"),this.searchInputWrap.className="search-input-wrap",this.searchInput=document.createElement("input"),this.searchInput.className="search-input",this.searchInput.type="text",this.searchInput.placeholder="Pesquisar...",this.searchClear=document.createElement("div"),this.searchClear.className="search-clear",this.searchClear.textContent="X",this.searchClear.title="Limpar",this.searchInputWrap.appendChild(this.searchInput),this.searchInputWrap.appendChild(this.searchClear),this.searchBar.appendChild(this.searchInputWrap),this.listContainer=document.createElement("div"),this.listContainer.className="list-container",this.list=document.createElement("ul"),this.list.className="list",this.listContainer.appendChild(this.list),this.root.appendChild(this.searchBar),this.root.appendChild(this.listContainer),this.host={applyJsonFilter:function(){}},e&&(this.host=e.host,e.element.appendChild(this.root)),this.searchInput.addEventListener("input",function(){t.searchQuery=(t.searchInput.value||"").toLowerCase(),t.renderList()}),this.searchClear.addEventListener("click",function(){t.searchQuery="",t.searchInput.value="",t.renderList()})}return e.prototype.update=function(e){var t=e.dataViews&&e.dataViews[0];t&&(this.settings=s.VisualSettings.parse(t)),this.applySearchBarSettings();var i=null==t?void 0:t.categorical,r=(null==i?void 0:i.categories)&&i.categories[0]||null;if(!r)return this.items=[],this.currentTarget=null,this.lastCategoryQueryName=null,this.lastItemCount=0,void this.renderList();var a=r.source&&r.source.queryName||null;if(this.lastCategoryQueryName&&a&&a!==this.lastCategoryQueryName&&(this.items=[],this.lastItemCount=0),this.lastCategoryQueryName=a,this.currentTarget=this.extractTargetFromMetadata(r),this.rebuildItems(r),this.settings.behavior_selectionMode&&this.settings.behavior_forceSelection&&this.items.length>0){for(var n=!1,o=0;o<this.items.length;o++)if(this.items[o].selected){n=!0;break}var l=0===this.lastItemCount||this.items.length<=this.lastItemCount;if(!n&&l){for(o=0;o<this.items.length;o++)this.items[o].selected=!1;this.items[0].selected=!0,this.applyBasicFilter()}}this.lastItemCount=this.items.length,this.renderList()},e.prototype.rebuildItems=function(e){for(var t=e.values||[],i=new Array(t.length),s=new Set,r=0;r<this.items.length;r++)this.items[r].selected&&s.add(this.items[r].label);for(r=0;r<t.length;r++){var a=t[r],n=null==a?"":String(a);i[r]={label:n,selected:s.has(n)}}this.items=i},e.prototype.extractTargetFromMetadata=function(e){var t,i,s,r,a=null===(t=e.source)||void 0===t?void 0:t.expr;try{var n=a&&(a.ref||a.level||a.source&&a.source.ref)||(null===(i=e.source)||void 0===i?void 0:i.groupName),o=a&&a.source&&a.source.entity||a&&a.arg&&a.arg.source&&a.arg.source.entity||a&&a.arg&&a.arg.arg&&a.arg.arg.entity;if(o&&n)return{table:String(o),column:String(n)}}catch(e){}var l=null===(s=e.source)||void 0===s?void 0:s.queryName;if(l&&"string"==typeof l){var h=l.lastIndexOf(".");if(h>0&&h<l.length-1)return{table:l.substring(0,h),column:l.substring(h+1)}}return(null===(r=e.source)||void 0===r?void 0:r.displayName)?{table:"",column:e.source.displayName}:null},e.prototype.applyBasicFilter=function(){if(this.currentTarget){for(var e=[],t=0;t<this.items.length;t++)this.items[t].selected&&e.push(this.items[t].label);if(0!==e.length){var i={$schema:"http://powerbi.com/product/schema#basic",filterType:1,target:{table:this.currentTarget.table,column:this.currentTarget.column},operator:"In",values:e};this.host.applyJsonFilter(i,r,a,0)}else this.host.applyJsonFilter(null,r,a,2)}},e.prototype.applySearchBarSettings=function(){var e=!!this.settings.search_enabled;this.searchBar.style.display=e?"flex":"none",this.searchInput.placeholder=this.settings.search_placeholder||"Pesquisar...";var t=Math.max(8,Number(this.settings.search_fontSize)||12);this.searchInput.style.fontSize=t+"px"},e.prototype.renderList=function(){for(var e=this;this.list.firstChild;)this.list.removeChild(this.list.firstChild);var t=(this.searchQuery||"").trim().toLowerCase(),i=[];if(""===t)for(var s=0;s<this.items.length;s++)i.push(s);else for(s=0;s<this.items.length;s++)-1!==(this.items[s].label||"").toLowerCase().indexOf(t)&&i.push(s);if(0===i.length){var r=document.createElement("div");return r.className="empty",r.textContent="Sem itens",void this.list.appendChild(r)}for(var a=this.settings.behavior_selectionMode,n=Math.max(8,Number(this.settings.formatting_fontSize)||12),o=Math.max(0,Number(this.settings.formatting_itemPadding)||0),l=function(t){var s=i[t],r=h.items[s],l=document.createElement("li");l.className="item"+(r.selected?" selected":""),l.style.fontSize=n+"px",l.style.paddingTop=o+"px",l.style.paddingBottom=o+"px";var c=document.createElement("input");c.type=a?"radio":"checkbox",a&&(c.name="visual-selection-group"),c.checked=r.selected,c.addEventListener("click",function(t){t.stopPropagation(),e.onItemClick(s)});var u=document.createElement("span");u.textContent=r.label,l.appendChild(c),l.appendChild(u),l.addEventListener("mousedown",function(e){0===e.button&&e.preventDefault()}),l.addEventListener("click",function(t){0===t.button&&e.onItemClick(s)}),h.list.appendChild(l)},h=this,c=0;c<i.length;c++)l(c)},e.prototype.onItemClick=function(e){var t=this.settings.behavior_selectionMode,i=!t,s=this.items[e];if(s&&!(t&&this.settings.behavior_forceSelection&&s.selected)){if(i)s.selected=!s.selected;else{for(var r=0;r<this.items.length;r++)this.items[r].selected=!1;s.selected=!0}this.renderList(),this.applyBasicFilter()}},e.prototype.enumerateObjectInstances=function(e){var t=[];return"behavior"===e.objectName&&t.push({objectName:"behavior",properties:{selectionMode:this.settings.behavior_selectionMode,forceSelection:this.settings.behavior_forceSelection},selector:{}}),"formatting"===e.objectName&&t.push({objectName:"formatting",properties:{fontSize:this.settings.formatting_fontSize,itemPadding:this.settings.formatting_itemPadding},selector:{}}),"search"===e.objectName&&t.push({objectName:"search",properties:{enabled:this.settings.search_enabled,placeholder:this.settings.search_placeholder,fontSize:this.settings.search_fontSize},selector:{}}),t},e}();t.Visual=n}},t={};function i(s){var r=t[s];if(void 0!==r)return r.exports;var a=t[s]={exports:{}};return e[s](a,a.exports,i),a.exports}i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};(()=>{var e=s;Object.defineProperty(e,"__esModule",{value:!0});var t=i(848),r=window.powerbi,a={name:"filtroConjugado123456",displayName:"Filtro Conjugado",class:"Visual",apiVersion:"5.11.0",create:function(e){if(t.Visual)return new t.Visual(e);throw"Visual instance not found"},createModalDialog:function(e,t,i){var s=globalThis.dialogRegistry;e in s&&new s[e](t,i)},custom:!0};void 0!==r&&(r.visuals=r.visuals||{},r.visuals.plugins=r.visuals.plugins||{},r.visuals.plugins.filtroConjugado123456=a),e.default=a})(),filtroConjugado123456=s})();